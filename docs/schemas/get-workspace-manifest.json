{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "get_workspace_manifest MCP Function",
  "description": "Schema for getting complete workspace manifest with metadata",
  "definitions": {
    "AiToolType": {
      "type": "string",
      "enum": ["claude-code"]
    },
    "AgentCapability": {
      "type": "string",
      "enum": [
        "project-management", "coordination", "frontend", "backend", "database",
        "devops", "testing", "qa", "security", "mobile", "data-science",
        "machine-learning", "ui-ux", "content", "documentation", "integration",
        "api-design", "architecture", "performance", "monitoring", "deployment"
      ]
    },
    "SuggestedAgent": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "required_capabilities": {
          "type": "array",
          "items": {"$ref": "#/definitions/AgentCapability"}
        },
        "workload_percentage": {"type": "number"},
        "depends_on": {
          "type": "array",
          "items": {"type": "string"}
        }
      },
      "required": ["name", "description", "required_capabilities", "workload_percentage", "depends_on"],
      "additionalProperties": false
    },
    "GeneratedFileInfo": {
      "type": "object",
      "properties": {
        "path": {"type": "string"},
        "type": {
          "type": "string",
          "enum": ["coordination", "agent-definition", "command", "config", "documentation"]
        },
        "description": {"type": "string"},
        "size_bytes": {"type": "integer", "minimum": 0}
      },
      "required": ["path", "type", "description"],
      "additionalProperties": false
    }
  },
  "request": {
    "type": "object",
    "properties": {
      "ai_tool_type": {"$ref": "#/definitions/AiToolType"},
      "include_generated_files": {
        "type": "boolean",
        "default": true,
        "description": "Whether to include generated file information"
      }
    },
    "required": ["ai_tool_type"],
    "additionalProperties": false
  },
  "response": {
    "type": "object",
    "properties": {
      "schema_version": {
        "type": "string",
        "pattern": "^\\d+\\.\\d+$"
      },
      "ai_tool_type": {"$ref": "#/definitions/AiToolType"},
      "project": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "description": {"type": "string"},
          "complexity_score": {"type": "integer", "minimum": 1, "maximum": 10},
          "primary_domain": {"type": "string"},
          "technologies": {
            "type": "array",
            "items": {"type": "string"}
          }
        },
        "required": ["name", "description", "complexity_score", "primary_domain", "technologies"]
      },
      "agents": {
        "type": "array",
        "items": {"$ref": "#/definitions/SuggestedAgent"}
      },
      "workflow": {
        "type": "object", 
        "properties": {
          "task_decomposition_strategy": {"type": "string"},
          "coordination_patterns": {
            "type": "array",
            "items": {"type": "string"}
          }
        },
        "required": ["task_decomposition_strategy", "coordination_patterns"]
      },
      "setup_instructions": {
        "type": "array",
        "items": {"type": "object"}
      },
      "generated_files": {
        "type": "array",
        "items": {"$ref": "#/definitions/GeneratedFileInfo"}
      },
      "created_at": {
        "type": "string",
        "format": "date-time"
      },
      "axon_version": {
        "type": "string",
        "pattern": "^\\d+\\.\\d+\\.\\d+"
      }
    },
    "required": ["schema_version", "ai_tool_type", "project", "agents", "workflow", "setup_instructions", "created_at", "axon_version"],
    "additionalProperties": false
  },
  "examples": {
    "request": {
      "ai_tool_type": "claude-code",
      "include_generated_files": true
    },
    "response": {
      "schema_version": "1.0",
      "ai_tool_type": "claude-code",
      "project": {
        "name": "E-commerce Platform",
        "description": "Modern e-commerce platform with AI-powered recommendations",
        "complexity_score": 7,
        "primary_domain": "web-development",
        "technologies": ["react", "node.js", "postgresql", "redis"]
      },
      "agents": [
        {
          "name": "project-manager",
          "description": "Coordinates overall project execution",
          "required_capabilities": ["project-management", "coordination"],
          "workload_percentage": 20.0,
          "depends_on": []
        }
      ],
      "workflow": {
        "task_decomposition_strategy": "Feature-based teams",
        "coordination_patterns": [
          "Daily standups via task messages",
          "Feature handoffs between teams"
        ]
      },
      "setup_instructions": [
        {
          "id": "create-directories",
          "title": "Create workspace directories",
          "order": 1
        }
      ],
      "generated_files": [
        {
          "path": "CLAUDE.md",
          "type": "coordination",
          "description": "Main coordination file for Claude Code",
          "size_bytes": 2048
        }
      ],
      "created_at": "2025-01-31T12:00:00Z",
      "axon_version": "0.1.0"
    }
  }
}